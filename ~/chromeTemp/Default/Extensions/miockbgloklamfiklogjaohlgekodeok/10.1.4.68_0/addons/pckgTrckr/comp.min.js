(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{815:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(19),__webpack_require__(18),__webpack_require__(43),__webpack_require__(20),__webpack_require__(27),__webpack_require__(50),__webpack_require__(129),__webpack_require__(16);var defineProperty=__webpack_require__(12),defineProperty_default=__webpack_require__.n(defineProperty),react=__webpack_require__(3),react_default=__webpack_require__.n(react),styled_components_browser_esm=__webpack_require__(65),get=__webpack_require__(17),get_default=__webpack_require__.n(get),isEmpty=__webpack_require__(148),isEmpty_default=__webpack_require__.n(isEmpty),regenerator=(__webpack_require__(791),__webpack_require__(28),__webpack_require__(156),__webpack_require__(48),__webpack_require__(32),__webpack_require__(9)),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(33),__webpack_require__(14)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),moment=__webpack_require__(7),moment_default=__webpack_require__.n(moment),HttpService=__webpack_require__(35),verticalConstsLoader=__webpack_require__(155),_getVerticalConsts=Object(verticalConstsLoader.a)("pckgTrckr"),PACKAGE_TRACKER_API_CARRIER_DETECT=_getVerticalConsts.PACKAGE_TRACKER_API_CARRIER_DETECT,TRACKING_CARRIERS=_getVerticalConsts.TRACKING_CARRIERS,PACKAGE_TRACKER_API_TRACKINGS_POST=_getVerticalConsts.PACKAGE_TRACKER_API_TRACKINGS_POST,PACKAGE_TRACKER_API_TRACKINGS=_getVerticalConsts.PACKAGE_TRACKER_API_TRACKINGS,TRACKING_CREATE_NEW=_getVerticalConsts.TRACKING_CREATE_NEW,TRACKING_PACKAGE=_getVerticalConsts.TRACKING_PACKAGE;var trackingmoreAPI=class trackingmoreAPI_TrackingmoreAPI{constructor(APIKey){this.APIKey=APIKey,this.currentTrackingNumber="",this.currentCarrierCode=null,this.requestCounter=0,this.retryCounter=0}trackPackage(trackingNumber,carrierCode){return this.currentTrackingNumber=trackingNumber,carrierCode?(this.currentCarrierCode=carrierCode,this.trackPackageKnownCarrier().then(data=>this.formatResponseData(data))):this.trackPackageUnknownCarrier().then(data=>this.formatResponseData(data))}getRequestCount(){return this.requestCounter}getCarrierCode(){return this.currentCarrierCode}getRetryCount(){return this.retryCounter}trackPackageUnknownCarrier(){var _this=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var possibleCarriers,response,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,carrier,code;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.getPossibleCarriers();case 2:if(possibleCarriers=_context.sent,!isEmpty_default()(possibleCarriers)){_context.next=5;break}throw"notfound";case 5:_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_context.prev=8,_iterator=possibleCarriers[Symbol.iterator]();case 10:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=22;break}return carrier=_step.value,code=carrier.code,_this.currentCarrierCode=code,_context.next=16,_this.trackPackageKnownCarrier();case 16:if("notfound"===(response=_context.sent).status){_context.next=19;break}return _context.abrupt("break",22);case 19:_iteratorNormalCompletion=!0,_context.next=10;break;case 22:_context.next=28;break;case 24:_context.prev=24,_context.t0=_context.catch(8),_didIteratorError=!0,_iteratorError=_context.t0;case 28:_context.prev=28,_context.prev=29,_iteratorNormalCompletion||null==_iterator.return||_iterator.return();case 31:if(_context.prev=31,!_didIteratorError){_context.next=34;break}throw _iteratorError;case 34:return _context.finish(31);case 35:return _context.finish(28);case 36:return _context.abrupt("return",response);case 37:case"end":return _context.stop()}}),_callee,null,[[8,24,28,36],[29,,31,35]])})))()}trackPackageKnownCarrier(){var _this2=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(){var currentCarrierCode,response;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return currentCarrierCode=_this2.currentCarrierCode,_context2.next=3,_this2.getTrackings(currentCarrierCode);case 3:return response=_context2.sent,_context2.next=6,_this2.tryGetTrackings(response);case 6:return response=_context2.sent,_context2.abrupt("return",get_default()(response,"data.data"));case 8:case"end":return _context2.stop()}}),_callee2)})))()}waitForTrackingResponse(){var _this3=this;return new Promise((resolve,reject)=>{setTimeout(asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(){var response;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this3.getTrackings(_this3.currentCarrierCode);case 2:response=_context3.sent,resolve(response);case 4:case"end":return _context3.stop()}}),_callee3)}))),700)})}tryGetTrackings(response){var _arguments=arguments,_this4=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee4(){var retryCount,metaCode,status;return regenerator_default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(retryCount=_arguments.length>1&&void 0!==_arguments[1]?_arguments[1]:0,metaCode=get_default()(response,"data.meta.code"),status=get_default()(response,"data.data.status"),!((4031===metaCode||"pending"===status)&&retryCount<5)){_context4.next=13;break}if(4031!==metaCode){_context4.next=8;break}return _context4.next=8,_this4.createAPITracking(_this4.currentCarrierCode);case 8:return _context4.next=10,_this4.waitForTrackingResponse();case 10:return response=_context4.sent,_this4.retryCounter+=1,_context4.abrupt("return",_this4.tryGetTrackings(response,retryCount+1));case 13:return _context4.abrupt("return",response);case 14:case"end":return _context4.stop()}}),_callee4)})))()}getPossibleCarriers(){var _this5=this;return asyncToGenerator_default()(regenerator_default.a.mark((function _callee5(){var options,response;return regenerator_default.a.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _this5.requestCounter+=1,options={url:PACKAGE_TRACKER_API_CARRIER_DETECT,method:"post",headers:{"Content-Type":"application/json","Trackingmore-Api-Key":_this5.APIKey},data:{tracking_number:_this5.currentTrackingNumber},featureName:TRACKING_CARRIERS},_context5.next=4,Object(HttpService.a)(options,"proxy");case 4:return response=_context5.sent,_context5.abrupt("return",get_default()(response,"data.data",[]));case 6:case"end":return _context5.stop()}}),_callee5)})))()}createAPITracking(carrierCode){this.requestCounter+=1;var options={url:PACKAGE_TRACKER_API_TRACKINGS_POST,method:"post",headers:{"Content-Type":"application/json","Trackingmore-Api-Key":this.APIKey},data:{tracking_number:this.currentTrackingNumber,carrier_code:carrierCode},featureName:TRACKING_CREATE_NEW};return Object(HttpService.a)(options,"proxy")}getTrackings(carrierCode){this.requestCounter+=1;var options={url:`${PACKAGE_TRACKER_API_TRACKINGS}/${carrierCode}/${this.currentTrackingNumber}`,method:"get",headers:{"Content-Type":"application/json","Trackingmore-Api-Key":this.APIKey},featureName:TRACKING_PACKAGE};return Object(HttpService.a)(options,"proxy")}formatResponseData(res){function getTrackingsFormatted(property){if(!res[property]||!res[property].trackinfo)return[];var carrierCode=res[property].carrier_code;return res[property].trackinfo.map(tracking=>{var statusDate=moment_default()(tracking.Date),date=statusDate.format("YYYY/MM/DD"),time=statusDate.format("HH:mm:ss");return{timestamp:statusDate.valueOf(),date:date,time:time,details:tracking.Details,statusDescription:tracking.StatusDescription,carrierCode:carrierCode}})}var mainStatus=get_default()(res,"status","pending");if("notfound"===mainStatus)throw res.substatus||"notfound001";if("pending"===mainStatus)throw"pending";var trackings=[...getTrackingsFormatted("origin_info"),...getTrackingsFormatted("destination_info")];return trackings.sort((a,b)=>a.timestamp<b.timestamp?1:-1),{mainStatus:mainStatus,trackings:trackings}}},StyledTimelineStatus=styled_components_browser_esm.a.div`
display:flex;
border-left: 1px solid ${props=>props.theme.primaryColor};
padding-bottom: 30px;
height: auto;
width: 100%;
line-height: 18px;
color: ${props=>props.theme.primaryColor};
font-size:12px;
strong{
    opacity: 0.4;
}
span{
    font-weight:300;
    opacity: 0.4;
}
&::before{
    box-sizing:border-box;
    content:'';
    min-width:12px;
    height:12px;
    border-radius:50%;
    border: 1px solid ${props=>props.theme.primaryColor};
    transform:translateX(-50%);
    background-color:white;
    
}
div.date{
    box-sizing:content-box;
    padding-left: 6px;
    min-width:66px;
    padding-right:12px;
    strong{
        float:right;
    }
}

.date strong:empty{
    display:none;
    ~ br{
    display:none;
    }
    ~ span{
    font-weight:bold;   
    }
}

&:only-child{
  border:none;
}

`,PackageTracker_TimelineStatus=_ref=>{var status=_ref.status,theme=_ref.theme;return react_default.a.createElement(StyledTimelineStatus,{className:"timeline-status",theme:theme},react_default.a.createElement("div",{className:"date"},react_default.a.createElement("strong",null,status.time),react_default.a.createElement("br",null),react_default.a.createElement("span",null,status.date)),react_default.a.createElement("div",{className:"description"},react_default.a.createElement("strong",null,status.statusDescription),react_default.a.createElement("br",null),react_default.a.createElement("span",null,status.details)))},StyledRecentTrackingNumber=styled_components_browser_esm.a.div`
border: 1px solid blue;
display:inline-block;
    padding: 2px 4px 2px 5px;
    background-color: #6b9fd7;
    color: #fff;
    border: 1px solid #2769b0;
    border-radius: 3px;
    font-size: 10px;
    display: inline-block;
    margin: 0 5px 5px 0;
    -webkit-transition: all .3s ease 0s;
    transition: all .3s ease 0s;
    &:hover{
        background-color: #5293d7;
    }
    span{
    display: inline-block;
    line-height: 10px;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: visible;
    max-width: 170px;
    cursor:default;
    }
    button{
    margin-left: 2px;
    vertical-align: middle;
    background-color: hsla(0,0%,4%,.2);
    border: none;
    border-radius: 50%;
    display: inline-block;
    height: 12px;
    width: 12px;
    outline: 0;
    padding:0;
    user-select: none;
    color:white;
    font-size:7px;
    font-weight:bold;
    transform: translateY(-5%);
     &:hover{
        opacity: .8;
     }
    }

`,PackageTracker_RecentTrackingNumber=_ref=>{var trackingNumber=_ref.trackingNumber,onSelection=_ref.onSelection,onDelete=_ref.onDelete;return trackingNumber?react_default.a.createElement(StyledRecentTrackingNumber,{onClick:onSelection},react_default.a.createElement("span",null,trackingNumber),react_default.a.createElement("button",{type:"button",onClick:e=>onDelete(e)},"X")):null},StyledLoadingBar=styled_components_browser_esm.a.div`
box-sizing:border-box;
position: relative;
@keyframes loading {
    from {
        left: 50%;
        width: 0;
        z-index: 100
    }

    33.3333% {
        left: 0;
        width: 100%;
        z-index: 10
    }

    to {
        left: 0;
        width: 100%
    }
}
.loading-bar {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
    background-color: #394a6d;
}
.bar {
    content: "";
    display: inline;
    position: absolute;
    width: 0;
    height: 100%;
    left: 50%;
    text-align: center;
}
.bar:nth-child(1) {
    background-color: #394a6d;
    animation: loading 2s linear infinite;
}
.bar:nth-child(2) {
    background-color: #3c9d9b;
    animation: loading 2s linear 0.66s infinite;
}
.bar:nth-child(3) {
    background-color: #52de97;
    animation: loading 2s linear 1.33s infinite;
}


`,PackageTracker_LoadingBar=()=>react_default.a.createElement(StyledLoadingBar,{className:"loading-bar-container"},react_default.a.createElement("div",{className:"loading-bar"},react_default.a.createElement("div",{className:"bar"}),react_default.a.createElement("div",{className:"bar"}),react_default.a.createElement("div",{className:"bar"}))),ComponentsFactory=__webpack_require__(15),ServiceFactory=__webpack_require__(1),Link=_ref2=>{var link=_ref2.link,imgUrl=link.imgUrl,linkUrl=link.linkUrl;return react_default.a.createElement("a",{href:linkUrl,target:"_blank",rel:"noopener noreferrer"},react_default.a.createElement("img",{src:imgUrl,className:"carrierLogoImage",alt:"quick-link"}))};var PackageTracker_QuickLinks=_ref=>{var _ref$links=_ref.links,links=void 0===_ref$links?[]:_ref$links,title=_ref.title;return react_default.a.createElement("div",{className:"linksContainer"},react_default.a.createElement("span",null,title),function _renderLinks(links){return links.map((link,index)=>{var id=index;return react_default.a.createElement(Link,{key:id,link:link})})}(links))},Consts=__webpack_require__(0);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}__webpack_require__.d(__webpack_exports__,"default",(function(){return PackageTracker_PackageTracker}));var PackageTracker_getVerticalConsts=Object(verticalConstsLoader.a)("pckgTrckr"),PACKAGE_TRACKER_TRACK_BUTTON_CLICK=PackageTracker_getVerticalConsts.PACKAGE_TRACKER_TRACK_BUTTON_CLICK,PACKAGE_TRACKER_TRACKING_RESULTS_SUCCESS=PackageTracker_getVerticalConsts.PACKAGE_TRACKER_TRACKING_RESULTS_SUCCESS,PACKAGE_TRACKER_TRACKING_RESULTS_FAILED=PackageTracker_getVerticalConsts.PACKAGE_TRACKER_TRACKING_RESULTS_FAILED,PACKAGE_TRACKER_ITEM_SAVED=PackageTracker_getVerticalConsts.PACKAGE_TRACKER_ITEM_SAVED,PACKAGE_TRACKER_SAVED_ITEM_CLICKED=PackageTracker_getVerticalConsts.PACKAGE_TRACKER_SAVED_ITEM_CLICKED;class PackageTracker_PackageTracker extends react_default.a.Component{constructor(props){super(props);var config=this.props.config;config.hide&&(this.render=()=>null),this.storageKeyRecents=`${config.id||"PackageTracker"}__recentTrackingNumbers`,this.storageKeyTrackingNumberToCarrierCodeMap=`${config.id||"PackageTracker"}__trackingNumberToCarrierCodeMap`,this.configurable={placeholder:get_default()(this.props,"config.elements.searchBox.placeholderTextContent","Enter Tracking Number"),buttonText:get_default()(this.props,"config.elements.submitButton.textContent","Track"),APIkey:get_default()(this.props,"config.APIKey"),themePrimaryColor:get_default()(this.props,"config.theme.primaryColor","#1a237e"),logoImageDisplay:get_default()(this.props,"config.elements.logoImage.display",!0),logoImageSrcUrl:get_default()(this.props,"config.elements.logoImage.srcUrl","http://d2gbn9pgmbetx7.cloudfront.net/package-tracker/package-tracker-logo.svg"),logoImageMargin:get_default()(this.props,"config.elements.logoImage.margin","30px 45px 20px 83px"),logoImageWidth:get_default()(this.props,"config.elements.logoImage.width","139px"),logoImageHeight:get_default()(this.props,"config.elements.logoImage.height","100px"),quickLinksDisplay:get_default()(this.props,"config.elements.quickLinks.display",!0),quickLinksTitleTextContent:get_default()(this.props,"config.elements.quickLinks.titleTextContent","Shipping Service"),quickLinksLinks:get_default()(this.props,"config.elements.quickLinks.links",[]),inlineStyle:get_default()(this.props,"config.style",{})},this.state={inputTerm:"",trackings:[],currentTrackingNumber:"",trackingStatus:"",recentTrackingNumbers:ServiceFactory.a.get(Consts.Ib).get(this.storageKeyRecents)||{},isLoading:!1},this.theme={primaryColor:this.configurable.themePrimaryColor,successColor:"#56b883",failureColor:"#ca6e6e",emptyColor:"#a7a7a7",paddingSides:15},this.mapStatusToClassName={notfound:"empty",pending:"primary",transit:"primary",pickup:"primary",delivered:"success",undelivered:"failure",exception:"failure",expired:"failure",apiFailure:"empty",loading:"primary"},this.textInput=null,this.setTextInputRef=element=>{this.textInput=element},this.trackingmoreAPI=new trackingmoreAPI(this.configurable.APIkey),this._css=this.getMainCss(),this.onInputChange=this.onInputChange.bind(this),this.onFormSubmit=this.onFormSubmit.bind(this),this.handleRecentTrackingNumberSelection=this.handleRecentTrackingNumberSelection.bind(this),this.handleRecentTrackingNumberDelete=this.handleRecentTrackingNumberDelete.bind(this),this.storageAddRecent=this.storageAddRecent.bind(this),this.fireEvent=this.fireEvent.bind(this),this.submit=this.submit.bind(this),this.getUpdatedRecentTrackingNumbers=this.getUpdatedRecentTrackingNumbers.bind(this),this.getStatusForError=this.getStatusForError.bind(this)}componentDidMount(){var input=this.textInput;input&&input.addEventListener("input",this.CustomizeNativeErrorMessage.bind(this,input,"Invalid Tracking Number"))}onInputChange(_ref){var target=_ref.target;this.setState({inputTerm:target.value.toString().trim()})}onFormSubmit(e){e.preventDefault(),this.fireEvent(PACKAGE_TRACKER_TRACK_BUTTON_CLICK),this.submit()}getMainCss(){var _this$theme=this.theme,primaryColor=_this$theme.primaryColor,successColor=_this$theme.successColor,failureColor=_this$theme.failureColor,emptyColor=_this$theme.emptyColor,paddingSides=_this$theme.paddingSides;return styled_components_browser_esm.a.div`
        padding-top:30px;
        img.logo{
            width:${this.configurable.logoImageWidth};
            height:${this.configurable.logoImageHeight};
            margin: ${this.configurable.logoImageMargin};
        }
        .linksContainer{
            display: flex;
            justify-content:center;
            align-items: center;
            margin: 0 0 18px 0;
            padding: 0 ${paddingSides}px;
            span{
                color: ${primaryColor};
                font-size: 13px;
                margin-right: 12px;
                font-weight:600;
            }
            img{
                width: 39px;
                padding-left: 5px;
            }
        }
        .recentsContainer{
           padding: 0 ${paddingSides}px;

        }
       form{
           padding: 0 ${paddingSides}px;
           margin-bottom:30px;
           input{
               width:100%;
               margin-bottom:8px;
               background-color: #f6f6fa;
               height: 35px;
               border: solid 2px transparent;
               border: solid 1px #eaeaea;
               border-radius: 4px;
               outline: none;
               padding-left: 10px;
               box-shadow:none;

               &:focus{
                border: solid 2px ${primaryColor};
                padding-left:9px;
               }
              
               &::placeholder{
                color: #cacaca;
               }
           }
           .button-container{
               display:flex;
               flex-direction:row-reverse;
           }
           button{
               cursor:pointer;
               width:31%;
               background-color:${primaryColor};
               color: white;
               border-radius: 4px;
               padding: 6px 0;
               font-size:14px;
               border:none;
               &:focus{
                outline:none;
               }
           }
       }

        .trackingResponse{
            .headerTrackingNumber{
                color:white;
                margin: 0;
                text-align: center;
                padding: 9px 0;
                font-size: 20px;
                &:empty{
                    display:none;
                }
            }

            &.primary{
                .headerTrackingNumber{
                background-color: ${primaryColor};
                }
                .trackings .timeline-status:first-child{
                    span,strong{
                        opacity:1;
                    }
                }

            } 
            &.success{
                .headerTrackingNumber{
                    background-color:${successColor};
                }
                .trackings .timeline-status:first-child{
                    color:${successColor};
                    span,strong{
                        opacity:1;
                    }
                    ::before{
                        background-color:${successColor};
                        border: 1px solid ${successColor};
                    }
                }
                
            } 
            &.failure{
                .headerTrackingNumber{
                    background-color:${failureColor};
                }
                .trackings .timeline-status:first-child{
                    color:${failureColor};
                    span,strong{
                        opacity:1;
                    }
                    ::before{
                        background-color:${failureColor};
                        border: 1px solid ${failureColor};
                    }
                }

            } 
            &.empty{
                .headerTrackingNumber{
                    background-color:${emptyColor};
                }
                .trackings .timeline-status:first-child{
                    color:${emptyColor};
                    span,strong{
                        opacity:1;
                    }
                    ::before{
                        background-color:${emptyColor};
                        border: 1px solid ${emptyColor};
                    }
                }

            } 
        }

        .trackings{
            padding: 0 ${paddingSides}px 0 ${paddingSides+12}px;
            margin-top: 26px;
            max-height:200px;
            overflow-x:visible;
            overflow-y: auto;
            word-break:break-word;
        }
       
        
        `}getUpdatedRecentTrackingNumbers(){var state=this.state,currentTrackingNumber=state.inputTerm,recents=_objectSpread({},state.recentTrackingNumbers);return!recents[currentTrackingNumber]&&Object.keys(recents).length<5&&(this.storageAddRecent(currentTrackingNumber),recents[currentTrackingNumber]=currentTrackingNumber),recents}getStatusForError(err){var errorMessage={notfound001:"Information Received/info received. The package is about to be picked up",notfound002:"There is no tracking information for this package",pending:"Could not receive an answer. Please try again later"}[err]||"There is no package tracking info available yet.",today=new Date;return{date:`${today.getFullYear()}/${today.getMonth()+1}/${today.getDate()}`,statusDescription:"Not Found",details:errorMessage,carrierCode:null}}CustomizeNativeErrorMessage(element,msg){element.validity.patternMismatch?element.setCustomValidity(msg):element.setCustomValidity("")}submit(){var state=this.state;if(!state.isLoading){var currentTrackingNumber=state.inputTerm,trackingSession=new trackingmoreAPI(this.configurable.APIkey),recents=this.getUpdatedRecentTrackingNumbers();this.setState({isLoading:!0,recentTrackingNumbers:recents,currentTrackingNumber:currentTrackingNumber,trackingStatus:"loading",trackings:[]});var carrierCode=this.storageGetCarrierCode(currentTrackingNumber);trackingSession.trackPackage(currentTrackingNumber,carrierCode||null).then(releventData=>{var requestCount=trackingSession.getRequestCount(),currentCarrierCode=trackingSession.getCarrierCode(),eventMsg=`requestCount-${requestCount}_retryCount-${trackingSession.getRetryCount()} `;this.storageAddKnownCarrierCode(currentTrackingNumber,currentCarrierCode),this.fireEvent(PACKAGE_TRACKER_TRACKING_RESULTS_SUCCESS,eventMsg),this.setState({trackings:releventData.trackings,currentTrackingNumber:currentTrackingNumber,trackingStatus:releventData.mainStatus,isLoading:!1})}).catch(err=>{var eventMsg=`requestCount-${trackingSession.getRequestCount()}_retryCount-${trackingSession.getRetryCount()} `;this.fireEvent(PACKAGE_TRACKER_TRACKING_RESULTS_FAILED,eventMsg);var statusForError=this.getStatusForError(err);this.setState({trackings:[statusForError],currentTrackingNumber:currentTrackingNumber,trackingStatus:"apiFailure",isLoading:!1})})}}storageAddRecent(trackingNumber){this.fireEvent(PACKAGE_TRACKER_ITEM_SAVED);var recents=_objectSpread({},this.state.recentTrackingNumbers);recents[trackingNumber]=trackingNumber,ServiceFactory.a.get(Consts.Ib).set(this.storageKeyRecents,recents)}storageAddKnownCarrierCode(trackingNumber,carrierCode){var trackingNumberToCarrierCodeMapUpdate=_objectSpread({},ServiceFactory.a.get(Consts.Ib).get(this.storageKeyTrackingNumberToCarrierCodeMap));trackingNumberToCarrierCodeMapUpdate[trackingNumber]=carrierCode,ServiceFactory.a.get(Consts.Ib).set(this.storageKeyTrackingNumberToCarrierCodeMap,trackingNumberToCarrierCodeMapUpdate)}storageGetCarrierCode(trackingNumber){var trackingNumberToCarrierCodeMap=ServiceFactory.a.get(Consts.Ib).get(this.storageKeyTrackingNumberToCarrierCodeMap)||{};return trackingNumberToCarrierCodeMap[trackingNumber]?trackingNumberToCarrierCodeMap[trackingNumber]:null}fireEvent(event,extra){ServiceFactory.a.get(Consts.oc).trackStatusEvent(event,extra)}handleRecentTrackingNumberSelection(trackingNumber){this.fireEvent(PACKAGE_TRACKER_SAVED_ITEM_CLICKED),this.setState({inputTerm:trackingNumber},()=>this.submit())}handleRecentTrackingNumberDelete(trackingNumber,e){var recentTrackingNumbers=this.state.recentTrackingNumbers;e.stopPropagation();var recents=_objectSpread({},recentTrackingNumbers);delete recents[trackingNumber],ServiceFactory.a.get(Consts.Ib).set(this.storageKeyRecents,recents),this.setState({recentTrackingNumbers:recents})}renderRecentTrackingNumbers(){var state=this.state;return Object.keys(state.recentTrackingNumbers).map(trackingNumber=>react_default.a.createElement(PackageTracker_RecentTrackingNumber,{key:trackingNumber,trackingNumber:trackingNumber,onSelection:()=>this.handleRecentTrackingNumberSelection(trackingNumber),onDelete:e=>this.handleRecentTrackingNumberDelete(trackingNumber,e)}))}renderTrackings(){return this.state.trackings.map((status,index)=>{var id=index+status;return react_default.a.createElement(PackageTracker_TimelineStatus,{theme:this.theme,status:status,key:id})})}renderLinks(){var _this$configurable=this.configurable,quickLinksLinks=_this$configurable.quickLinksLinks,quickLinksTitleTextContent=_this$configurable.quickLinksTitleTextContent;return react_default.a.createElement(PackageTracker_QuickLinks,{links:quickLinksLinks,title:quickLinksTitleTextContent})}renderLogo(){var state=this.state;return isEmpty_default()(state.trackingStatus)?react_default.a.createElement("img",{className:"logo",src:this.configurable.logoImageSrcUrl,alt:"package-tracker-logo"}):null}render(){var StyledPackageTracker=this._css,state=this.state;return react_default.a.createElement(StyledPackageTracker,{style:this.configurable.inlineStyle},this.configurable.logoImageDisplay?this.renderLogo():null,this.configurable.quickLinksDisplay?this.renderLinks():null,react_default.a.createElement("div",{className:"recentsContainer"},this.renderRecentTrackingNumbers()),react_default.a.createElement("form",{onSubmit:this.onFormSubmit},react_default.a.createElement("input",{ref:this.setTextInputRef,required:!0,pattern:"^\\s*[a-zA-Z0-9]{6,35}\\s*$",type:"text",placeholder:this.configurable.placeholder,value:state.inputTerm,onChange:this.onInputChange}),react_default.a.createElement("div",{className:"button-container"},react_default.a.createElement("button",{type:"submit"},this.configurable.buttonText))),state.isLoading&&react_default.a.createElement(PackageTracker_LoadingBar,null),react_default.a.createElement("div",{className:`trackingResponse ${this.mapStatusToClassName[state.trackingStatus]||"primary"}`},react_default.a.createElement("h3",{className:"headerTrackingNumber"},state.currentTrackingNumber),react_default.a.createElement("div",{className:"trackings"},!isEmpty_default()(state.trackings)&&this.renderTrackings())))}}ComponentsFactory.a.add(()=>PackageTracker_PackageTracker,"PackageTracker")}}]);