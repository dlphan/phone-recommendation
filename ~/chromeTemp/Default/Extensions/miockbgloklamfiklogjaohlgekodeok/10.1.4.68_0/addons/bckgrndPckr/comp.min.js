(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{814:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react=__webpack_require__(3),react_default=__webpack_require__.n(react),ComponentsFactory=__webpack_require__(15),EventsService=(__webpack_require__(43),__webpack_require__(5)),styled_components_browser_esm=__webpack_require__(65),BackgroundPickerStyle=styled_components_browser_esm.a.div`
  font-family: ${props=>props.style.fontFamily||"inherit"} !important;
  font-size: ${props=>props.style.fontSize||"inherit"} !important;
  color: ${props=>props.style.color||"inherit"} !important;
`,MenuButtonRow=styled_components_browser_esm.a.div`
  display: flex;
  flex-flow: row;
  justify-content: space-between;
  align-items: center;
  margin: 6px 0;
`,PopupBtn=styled_components_browser_esm.a.div`
    position: ${_ref=>{return"standalone"===_ref.config.template.mode?"absolute":"relative"}};
    top: ${_ref2=>{var config=_ref2.config;return"standalone"===config.template.mode?config.elements.symbolBtn.style.top:"0"}};
    right: ${_ref3=>{var config=_ref3.config;return"standalone"===config.template.mode?config.elements.symbolBtn.style.right:"0"}};
    width: ${_ref4=>{return"standalone"===_ref4.config.template.mode?"30px":"25px"}};
    height: ${_ref5=>{return"standalone"===_ref5.config.template.mode?"30px":"25px"}};
    ${props=>"symbol"===props.buttonType?"\n    background-size: contain;\n    background-image: url(content/images/brush.png);\n    background-repeat: no-repeat;\n    filter: invert(0%);\n    ":"\n    box-shadow: rgba(0, 0, 0, 0.49) 0 0 2px 0;\n    border: 1px solid rgb(255, 255, 255);\n    border-radius: 50%;\n    "};
    ${props=>"color"===props.buttonType?`background-color: ${props.color};`:""};
    ${props=>"image"===props.buttonType?`\n    background-image: url(${props.img});\n    background-repeat: no-repeat;\n    background-size: 100% 100%;\n    `:""};
    cursor: pointer;
    display: block;
`,PickerPopupWrapper=styled_components_browser_esm.a.div`
    top: 130px;
    right: 30px;
    border: none;
    z-index: 15;
    padding: 15px;
    opacity: ${props=>props.opacity};
    position: absolute;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.61);
    background-color: #ffffff;
    display: ${props=>props.display};
    transition: opacity .4s;
`,Backdrop=styled_components_browser_esm.a.div`
    width: 100%;
    height: 100%;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 14;
    display: ${props=>props.display};
`,ColorPickWrapper=styled_components_browser_esm.a.ul`
    display: flex;
    list-style: none;
    align-items: center;
    margin: 0;
    padding: 0;
    ${props=>props.isMenuView?"width: 225px; flex-flow: row wrap;":"justify-content: space-between;"}
`,ColorPickerBullet=styled_components_browser_esm.a.li`
   border: solid 1px gray;
   cursor: pointer;
   width: 20px;
   height: 20px;
   border-radius: 50%;
   margin: 4px;
   transition: all .5s;
   flex-shrink: 0;
   
   &:first-child {
    ${props=>props.isMenuView?"":"margin-left: 0;"}
   }
`,WallpaperList=styled_components_browser_esm.a.div`
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 12px 0;
`,WallpaperItem=styled_components_browser_esm.a.div`
    width: ${props=>props.smallThumb?"35px":"80px"};
    height: ${props=>props.smallThumb?"35px":"80px"};
    cursor: pointer;
    margin: ${props=>props.smallThumb?"0 7px":"0 8px"};
    border-radius: 50%;
    background-image: url(${props=>props.img});
    background-repeat: no-repeat;
    background-size: 100% 100%;
    transition: all .3s;
    border: 1px solid #b9b9b9;
    
    &:hover {
      border-color: black;
    }
    
    &:first-child {
      margin-left: 0;
    }
    
    &:last-child {
      margin-right: 0;
    }
`,WallpaperSettings=styled_components_browser_esm.a.div`
    display: flex;
    align-items: center;
    
    > span {
      margin-right: 10px;
    }
`,ActionTypes=__webpack_require__(13);class ColorPicker_ColorPicker extends react_default.a.Component{setBackgroundColor(color){EventsService.a.trigger(ActionTypes.a,[{color:color}]),(0,this.props.updateMenuIcons)()}render(){var _this$props=this.props,colors=_this$props.colors,isMenuView="subComponent"===_this$props.template.mode;return react_default.a.createElement(ColorPickWrapper,{isMenuView:isMenuView},colors.map(hex=>react_default.a.createElement(ColorPickerBullet,{isMenuView:isMenuView,key:hex,onClick:()=>this.setBackgroundColor(hex),className:"color-picker-btn",style:{backgroundColor:hex}})))}}ComponentsFactory.a.add(()=>ColorPicker_ColorPicker,"ColorPicker");var StorageService=__webpack_require__(31),Switch=styled_components_browser_esm.a.label`
  position: relative;
  display: inline-block;
  width: 40px;
  height: 20px;
`,Input=styled_components_browser_esm.a.input`
  position: relative;
  display: none;
  width: 40px;
  height: 20px;
      
  &:checked + .slider {
    background-color: #78e389;
  }
    
  &:focus + .slider {
    box-shadow: 0 0 1px #78e389;
  }
  
  &:checked + .slider:before {
    -webkit-transform: translateX(18px);
    -ms-transform: translateX(18px);
    transform: translateX(18px);
  }
`,Slider=styled_components_browser_esm.a.span`
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
  border-radius: 34px;
  
  &:before {
    position: absolute;
    content: "";
    height: 14px;
    width: 14px;
    left: 4px;
    bottom: 3px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
    border-radius: 50%;
  }
`;class SwitchButton_SwitchButton extends react_default.a.Component{constructor(props){super(props),this.state={isChecked:props.isChecked},this.updateState=this.updateState.bind(this)}componentWillReceiveProps(nextProps,nextContext){if(this.props.isChecked!==nextProps.isChecked){var isChecked=nextProps.isChecked;this.setState({isChecked:isChecked})}}updateState(){var isChecked=this.state.isChecked;this.setState({isChecked:!isChecked},()=>{(0,this.props.onChange)(this.state.isChecked)})}render(){var isChecked=this.state.isChecked;return react_default.a.createElement(Switch,null,react_default.a.createElement(Input,{type:"checkbox",checked:isChecked,onClick:this.updateState,onChange:()=>{}}),react_default.a.createElement(Slider,{className:"slider"}))}}var verticalConstsLoader=__webpack_require__(155),ServiceFactory=__webpack_require__(1),Consts=__webpack_require__(0),_getVerticalConsts=Object(verticalConstsLoader.a)("bckgrndPckr"),USER_WALLPAPERS_LS_KEY=_getVerticalConsts.USER_WALLPAPERS_LS_KEY,TOGGLE_USER_WALLPAPERS_LS_KEY=_getVerticalConsts.TOGGLE_USER_WALLPAPERS_LS_KEY,DEFAULT_RANDOM_WALLPAPER_STATE=_getVerticalConsts.DEFAULT_RANDOM_WALLPAPER_STATE;class WallpaperPicker_WallpaperPicker extends react_default.a.Component{constructor(props){super(props),this.state={wallpapers:{}},this.toggleEventMap={true:"refresh_wall_on",false:"refresh_wall_off"},this.storeToggleState=this.storeToggleState.bind(this)}componentDidMount(){this.watchForWallpapers(100)}getUserToggledOption(){var userToggleSetting=StorageService.a.get(TOGGLE_USER_WALLPAPERS_LS_KEY);return userToggleSetting?JSON.parse(userToggleSetting):DEFAULT_RANDOM_WALLPAPER_STATE}watchForWallpapers(retries){var userWallpapers=StorageService.a.get(USER_WALLPAPERS_LS_KEY);userWallpapers?(userWallpapers=JSON.parse(userWallpapers),this.setState({wallpapers:userWallpapers})):setTimeout(()=>{--retries&&this.watchForWallpapers(retries)},200)}updateBackgroundWallpaper(image){var updateMenuIcons=this.props.updateMenuIcons;EventsService.a.trigger(ActionTypes.a,[{image:image}]),updateMenuIcons()}storeToggleState(isOn){ServiceFactory.a.get(Consts.oc).trackStatusEvent(this.toggleEventMap[isOn]),StorageService.a.set(TOGGLE_USER_WALLPAPERS_LS_KEY,isOn)}render(){var wallpapers=this.state.wallpapers.images,isMenuView="medium"===this.props.template.popupType,isAutoToggled=this.getUserToggledOption();return react_default.a.createElement("div",null,react_default.a.createElement(WallpaperList,null,wallpapers&&wallpapers.map(img=>{var imgUrl=img.thumbnail||img.url;return react_default.a.createElement(WallpaperItem,{key:imgUrl,img:imgUrl,smallThumb:isMenuView,onClick:()=>this.updateBackgroundWallpaper(img.url)})})),react_default.a.createElement(WallpaperSettings,null,react_default.a.createElement("span",null,"Change wallpaper every new tab"),react_default.a.createElement(SwitchButton_SwitchButton,{isChecked:isAutoToggled,onChange:this.storeToggleState})))}}ComponentsFactory.a.add(()=>WallpaperPicker_WallpaperPicker,"WallpaperPicker");class PickerPopup_PickerPopup extends react_default.a.Component{constructor(props){super(props),this.state={display:"none",opacity:0}}componentDidUpdate(prevProps,prevState,snapshot){var isVisible=this.props.isVisible;isVisible!==prevProps.isVisible&&(isVisible?this.setState({display:"block"},()=>setTimeout(()=>{this.setState({opacity:1})},0)):this.setState({opacity:0},()=>setTimeout(()=>{this.setState({display:"none"})},500)))}render(){var _this$props=this.props,hide=_this$props.hide,_this$props$config=_this$props.config,elements=_this$props$config.elements,template=_this$props$config.template,updateMenuIcons=_this$props.updateMenuIcons,_this$state=this.state,display=_this$state.display,opacity=_this$state.opacity;return react_default.a.createElement("div",null,react_default.a.createElement(PickerPopupWrapper,{display:display,opacity:opacity},elements.colors.isActive&&react_default.a.createElement(ColorPicker_ColorPicker,{colors:elements.colors.list,template:template,updateMenuIcons:updateMenuIcons}),elements.wallpapers.isActive&&react_default.a.createElement(WallpaperPicker_WallpaperPicker,{template:template,updateMenuIcons:updateMenuIcons,config:elements.wallpapers})),react_default.a.createElement(Backdrop,{onClick:hide,display:display}))}}ComponentsFactory.a.add(()=>PickerPopup_PickerPopup,"PickerPopup"),__webpack_require__.d(__webpack_exports__,"default",(function(){return BackgroundPicker_BackgroundPicker}));class BackgroundPicker_BackgroundPicker extends react_default.a.Component{constructor(props){super(props),this.state={selectedBgColor:"",selectedBgImage:"",isPopupActive:!1},this.togglePopup=this.togglePopup.bind(this),this.updateMenuIcons=this.updateMenuIcons.bind(this)}componentDidMount(){this.shouldRender()&&this.updateMenuIcons()}shouldRender(){return this.props.config.isActive}togglePopup(){var currState=this.state.isPopupActive;this.setState({isPopupActive:!currState})}updateMenuIcons(){var selectedBgColor=StorageService.a.get("bg_color")||"#ffffff",selectedBgImage=StorageService.a.get("bg_img");this.setState({selectedBgColor:selectedBgColor,selectedBgImage:selectedBgImage})}render(){if(!this.shouldRender())return null;var state=this.state,config=this.props.config,isPopupActive=state.isPopupActive,selectedBgImage=state.selectedBgImage,selectedBgColor=state.selectedBgColor;return react_default.a.createElement(BackgroundPickerStyle,{style:config.style},react_default.a.createElement(MenuButtonRow,null,react_default.a.createElement("div",null,config.template.label),react_default.a.createElement(PopupBtn,{config:config,img:selectedBgImage,color:selectedBgColor,onClick:this.togglePopup,buttonType:config.template.buttonType})),react_default.a.createElement(PickerPopup_PickerPopup,{isVisible:isPopupActive,hide:this.togglePopup,updateMenuIcons:this.updateMenuIcons,config:config}))}}ComponentsFactory.a.add(()=>BackgroundPicker_BackgroundPicker,"BackgroundPicker")}}]);