(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{790:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(18),__webpack_require__(16);var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(33),__webpack_require__(14)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__),_dynamicLoaders_ServiceFactory__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1),_utils_utils_Consts__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),_dynamicLoaders_verticalConstsLoader__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(155),_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6),_commonActions_actionsUtils_ActionsUtils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8),_utils_utils_pureUtils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(4),_getVerticalConsts=Object(_dynamicLoaders_verticalConstsLoader__WEBPACK_IMPORTED_MODULE_7__.a)("vsn"),RELOAD_PAGE=_getVerticalConsts.RELOAD_PAGE,RELOAD_PAGE_BROWSER_SESSION=_getVerticalConsts.RELOAD_PAGE_BROWSER_SESSION,RELOAD_PAGE_COUNT=_getVerticalConsts.RELOAD_PAGE_COUNT,RELOAD_PAGE_HANDLER=_getVerticalConsts.RELOAD_PAGE_HANDLER,updateCurrentTab=function(){var _ref=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function _callee(urlTopOpen){var tabIdToClose,lastActiveTab,_args=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!((tabIdToClose=_args.length>1&&void 0!==_args[1]&&_args[1])>=0)){_context.next=5;break}_context.t0=tabIdToClose,_context.next=8;break;case 5:return _context.next=7,_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.getLastActiveTab();case 7:_context.t0=_context.sent;case 8:return lastActiveTab=_context.t0,_context.next=11,_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.createTab(urlTopOpen);case 11:return _context.next=13,_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.removeTab(lastActiveTab.id||lastActiveTab);case 13:case"end":return _context.stop()}}),_callee)})));return function updateCurrentTab(_x){return _ref.apply(this,arguments)}}();__webpack_exports__.default={updateCurrentTab:updateCurrentTab,shouldReloadSearchPage:function shouldReloadSearchPage(){var isFirstSearch=arguments.length>0&&void 0!==arguments[0]&&arguments[0],searchTabOverride=arguments.length>1?arguments[1]:void 0,type=searchTabOverride||!1,map={all:!0,first:!!isFirstSearch},returnValue=map[type]||!1;if(returnValue){var pref=_dynamicLoaders_ServiceFactory__WEBPACK_IMPORTED_MODULE_5__.a.get(_utils_utils_Consts__WEBPACK_IMPORTED_MODULE_6__.Ib);return!pref.get(_utils_utils_Consts__WEBPACK_IMPORTED_MODULE_6__.M)}return!1},[RELOAD_PAGE]:function reloadPage(){var args=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},behaviour=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.checkIfNewTabIsTaken()&&Object(_commonActions_actionsUtils_ActionsUtils__WEBPACK_IMPORTED_MODULE_9__.a)(args,behaviour)){var pref=_dynamicLoaders_ServiceFactory__WEBPACK_IMPORTED_MODULE_5__.a.get(_utils_utils_Consts__WEBPACK_IMPORTED_MODULE_6__.Ib),disabled=-1===behaviour.limit,lastHandledSession=pref.get(RELOAD_PAGE_BROWSER_SESSION),browserSessionId=_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.getBrowserSessionId();if(disabled)lastHandledSession&&lastHandledSession!==browserSessionId&&pref.set(RELOAD_PAGE_COUNT,void 0);else{var resetOnBrowserSession=behaviour.resetOnBrowserSession||!1,existHandler=pref.get(RELOAD_PAGE_HANDLER,"global");if(!existHandler||(_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.tabsOnCreatedRemoveListener(existHandler),!pref.get(_utils_utils_Consts__WEBPACK_IMPORTED_MODULE_6__.M)))if(resetOnBrowserSession||!lastHandledSession||lastHandledSession===browserSessionId){var limit=behaviour.limit,checkLimit=()=>{return 0===limit||(pref.get(RELOAD_PAGE_COUNT)||0)<limit};if(resetOnBrowserSession&&lastHandledSession&&lastHandledSession!==browserSessionId)pref.set(RELOAD_PAGE_COUNT,void 0);else if(!checkLimit())return;var isUrlHaveLockParams=url=>{return!!Object(_utils_utils_pureUtils__WEBPACK_IMPORTED_MODULE_10__.j)(url)[browserSessionId]},isRelevantUrl=url=>url===_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.getBrowserDefaultNewtabUrl()||!!_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.isUrlIsNewTab(url)&&!isUrlHaveLockParams(url),isRelevantTab=tab=>"firefox"===_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.getBrowserFlavor("long")?tab.url===_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.getBrowserDefaultNewtabUrl()&&("New Tab"===tab.title||!isUrlHaveLockParams(tab.title)&&!!_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.isUrlIsNewTab(`moz-extension://${tab.title}`)):isRelevantUrl(tab.url);pref.set(RELOAD_PAGE_BROWSER_SESSION,browserSessionId);var handler=tab=>{var prefService=_dynamicLoaders_ServiceFactory__WEBPACK_IMPORTED_MODULE_5__.a.get(_utils_utils_Consts__WEBPACK_IMPORTED_MODULE_6__.Ib);prefService.get(_utils_utils_Consts__WEBPACK_IMPORTED_MODULE_6__.M)||isRelevantTab(tab)&&(checkLimit()?_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.tabsGet(tab.id,returnedTab=>{if(returnedTab){var createTabProperties={url:_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.getNewTabUrlWithParams({[browserSessionId]:!0}),active:returnedTab.active,index:returnedTab.index};_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.createTab(createTabProperties).then(()=>{_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.removeTab(returnedTab.id),prefService.count(RELOAD_PAGE_COUNT)})}}):_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.tabsOnCreatedRemoveListener(handler))};pref.set(RELOAD_PAGE_HANDLER,handler,"global"),_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.tabsQuery({},tabs=>{tabs&&tabs.length&&tabs.filter(tab=>tab.id<=3).forEach((value,index)=>{handler(value)})}),_utils_browser_BrowserService__WEBPACK_IMPORTED_MODULE_8__.a.tabsOnCreated(handler)}else pref.set(RELOAD_PAGE_COUNT,void 0)}}}}}}]);