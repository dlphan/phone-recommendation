(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{801:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(19),__webpack_require__(18),__webpack_require__(74),__webpack_require__(785),__webpack_require__(20),__webpack_require__(75),__webpack_require__(45),__webpack_require__(16);var defineProperty=__webpack_require__(12),defineProperty_default=__webpack_require__.n(defineProperty),get=__webpack_require__(17),get_default=__webpack_require__.n(get),isArray=__webpack_require__(11),isArray_default=__webpack_require__.n(isArray),ServiceFactory=__webpack_require__(1),ActionsUtils=__webpack_require__(8);__webpack_require__(28),__webpack_require__(27),__webpack_require__(32),__webpack_require__(263);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var FilesService=new class Files{constructor(){this.fileObject={}}getAllFiles(){return this.fileObject}getFileByName(name){return this.fileObject[name]}deleteAllFiles(){return this.fileObject={},!0}deleteFileByName(name){return!!name&&(delete this.fileObject[name],!0)}fileExist(name){return!!name&&this.fileObject[name]}addFiles(fileObject){return this.fileObject=function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},this.fileObject,{},fileObject),!0}generateFileUrl(fileName){if(!fileName||!this.fileObject[fileName])return!1;try{return URL.createObjectURL(this.fileObject[fileName])}catch(e){return!1}}},EventsService=__webpack_require__(5),Utils=__webpack_require__(2),HttpService=__webpack_require__(35),Consts=__webpack_require__(0),BrowserService=__webpack_require__(6),verticalConstsLoader=__webpack_require__(155),pureUtils=__webpack_require__(4);function fileConversionActions_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function fileConversionActions_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?fileConversionActions_ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):fileConversionActions_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var _getVerticalConsts=Object(verticalConstsLoader.a)("flCnvrsn"),FEATURE_NAME_FILE_CONVERT=_getVerticalConsts.FEATURE_NAME_FILE_CONVERT,GENERATE_FILE_URL=_getVerticalConsts.GENERATE_FILE_URL,STORE_FILE=_getVerticalConsts.STORE_FILE,REMOVE_FILES=_getVerticalConsts.REMOVE_FILES,UPLOAD_FILE_TO_CONVERT=_getVerticalConsts.UPLOAD_FILE_TO_CONVERT,BROWSE_FILES=_getVerticalConsts.BROWSE_FILES,VALIDATE_FILES_TYPES=_getVerticalConsts.VALIDATE_FILES_TYPES;__webpack_exports__.default={[GENERATE_FILE_URL]:function generateFileURL(){var args=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},behaviour=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},self=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(ActionsUtils.a)(args,behaviour,self)){var fileName=behaviour.fileName||args.fileName||!1;if(fileName){var fileUrl=FilesService.generateFileUrl(fileName);if(fileUrl){var events=behaviour.events||args.events||{success:"GENERATE_FILE_URL_SUCCESS"};EventsService.a.trigger(events.success,[{fileUrl:fileUrl}])}}}},[REMOVE_FILES]:function removeFiles(){var args=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},behaviour=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},self=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(ActionsUtils.a)(args,behaviour,self)){var files=!!Array.isArray(behaviour.files)&&behaviour.files;files&&files&&Object.keys(files).forEach(file=>{FilesService.deleteFileByName(files[file])})}},[STORE_FILE]:function storeFile(){var args=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},behaviour=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},self=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(ActionsUtils.a)(args,behaviour,self)&&args.files&&"object"==typeof args.files&&args.files.length){var files=args.files;if(behaviour.fileName&&behaviour.fileLocation){var fn=behaviour.fileName;FilesService.addFiles({[fn]:files[behaviour.fileLocation]}),behaviour.event&&EventsService.a.trigger(behaviour.event,[files[behaviour.fileLocation]])}else files&&Object.keys(files).forEach(file=>{if("length"!==file&&"item"!==file){var _fn=files[file].name,f=files[file];FilesService.addFiles({[_fn]:f})}}),behaviour.event&&EventsService.a.trigger(behaviour.event,[{files:JSON.stringify(files)}])}},[UPLOAD_FILE_TO_CONVERT]:function uploadFileToConvert(){var args=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},behaviour=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},self=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(ActionsUtils.a)(args,behaviour,self)){var fileName=behaviour.fileName||args.fileName||!1;if(fileName){var convertType=behaviour.convertType||args.convertType||!1;if(convertType){var file=FilesService.getFileByName(fileName),events=behaviour.events||{};if(events=fileConversionActions_objectSpread({success:"FILE_CONVERT_SUCCEEDED",failure:"FILE_CONVERT_FAILED",noFile:"FILE_CONVERT_NOFILE",start:"FILE_CONVERT_STARTED"},events),file){var convertKey=behaviour.convertKey||atob("MDhjZDdiNWMxM2RhNGE2NGUwZmRjNWNmYWI2YzM1NmNjYjMyMWRkYQ=="),convertUrl=behaviour.convertUrl||atob("aHR0cHM6Ly9hcGkuemFtemFyLmNvbS92MS9qb2JzLw=="),getFileUrl=behaviour.getFileUrl||"https://api.zamzar.com/v1/files/{{fileId}}/content",baseRetries=behaviour.retries||12,retries=baseRetries;convertType=convertType.toLowerCase();var authKey=`Basic ${btoa(`${convertKey}:`)}`;EventsService.a.trigger(events.start);var headersObject={Authorization:authKey},processId=!1,abortMsg=behaviour.abortMsg||!1,abort=!1;if(abortMsg){var abortListener=event=>{for(var msg in abortMsg)if(event.data[msg]===abortMsg[msg]&&(abort=!0)){window.removeEventListener("message",abortListener,!1);break}};window.addEventListener("message",abortListener)}var handleInitRes=res=>{abort||(Object(Utils.r)(res)&&"initialising"===res.status&&res.id?(processId=res.id,setTimeout(()=>{getProcessInfo(processId)},500)):failure("process_init_failed"))},processInfoHandler=(_processId,response)=>{if(retries)if("successful"===response.status){var fileId=!!(isArray_default()(response.target_files)&&Object(Utils.r)(response.target_files[0])&&response.target_files[0].id)&&response.target_files[0].id;fileId?downloadConvertedFile(fileId):failure("process_returned_without_file_id")}else"failed"===response.status?failure("process_status_failed"):(--retries,setTimeout(()=>{getProcessInfo(_processId)},5e3));else failure(`process_didnt_return_after_${baseRetries}_retries`)},getProcessInfo=processID=>{if(!abort){var infoUrl=convertUrl+processID;Object(HttpService.a)({method:"get",url:infoUrl,headers:headersObject,featureName:FEATURE_NAME_FILE_CONVERT},"proxy").then(response=>{processInfoHandler(processID,response.data)}).catch(e=>{failure(e)})}},downloadConvertedFile=fileId=>{if(!abort){var url=getFileUrl.replace("{{fileId}}",fileId),downloadFileName=`${file.name.substr(0,file.name.lastIndexOf("."))}.${convertType}`;Object(Utils.e)(url,downloadFileName,headersObject).then(()=>{EventsService.a.trigger(events.success)}).catch(e=>{failure(e)})}},failure=function failure(){var error=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",trackingService=ServiceFactory.a.get(Consts.oc),errorMessage=error.response&&error.response.data?error.response.data:error;trackingService.trackStatusEvent("api_error",void 0,void 0,void 0,void 0,void 0,{extra1:errorMessage}),Object(Utils.q)(errorMessage,"credits")&&BrowserService.a.createTab({url:"https://www.zamzar.com"}),EventsService.a.trigger(events.failure,[{error:""}])},startConvertProcess=()=>{if(!abort){var form=new FormData;form.append("source_file",file),form.append("target_format",convertType),Object(HttpService.a)({method:"post",url:convertUrl,data:form,headers:headersObject,featureName:FEATURE_NAME_FILE_CONVERT},"proxy").then(response=>{handleInitRes(response.data)}).catch(e=>{failure(e)})}};startConvertProcess()}else EventsService.a.trigger(events.noFile)}}}},[BROWSE_FILES]:function browseFiles(){var args=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},behaviour=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},fileInput=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],document.createElement("input"));fileInput.addEventListener("change",()=>{behaviour.event&&EventsService.a.trigger(behaviour.event,[{files:fileInput.files}])}),fileInput.style.display="none",fileInput.type="file",fileInput.name="file";var accept=behaviour.accept||args.accept||!1;accept&&(fileInput.accept=accept),fileInput.click()},[VALIDATE_FILES_TYPES]:function validateFilesTypes(){var args=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},behaviour=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},self=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(ActionsUtils.a)(args,behaviour,self)){var files=!1,deepFiles=behaviour.deepFiles||args.deepFiles||!1;if(deepFiles&&(files=get_default()(args,deepFiles,!1)),(files=files||args.files)&&"object"==typeof files&&files.length){var allowedTypes=behaviour.allowedTypes||!1,maxAllowedSize=behaviour.maxAllowedSize||!1,maxAllowedLength=behaviour.maxAllowedLength||!1,events=behaviour.events?behaviour.events:{success:"VALIDATE_FILE_SUCCESS",size:"VALIDATE_FILE_SIZE_FAIL",type:"VALIDATE_FILE_TYPE_FAIL",amount:"VALIDATE_FILE_AMOUNT_FAIL"};if(allowedTypes&&Array.isArray(allowedTypes)||maxAllowedSize||maxAllowedLength)if(maxAllowedLength&&files.length>maxAllowedLength)EventsService.a.trigger(events.amount,[fileConversionActions_objectSpread({},args,{fileName:files[0].name,files:files})],!0);else{var validate=!0;for(var file in files)if("length"!==file&&"item"!==file&&(allowedTypes&&(files[file].type&&!allowedTypes.includes(files[file].type)||!files[file].type&&!Object(pureUtils.r)(files[file].name,allowedTypes))&&(validate=!1,EventsService.a.trigger(events.type,[fileConversionActions_objectSpread({},args,{fileName:files[0].name,files:files})],!0)),maxAllowedSize&&validate&&files[file].size>maxAllowedSize&&(validate=!1,EventsService.a.trigger(events.size,[fileConversionActions_objectSpread({},args,{fileName:files[0].name,files:files})],!0)),!validate))break;validate&&EventsService.a.trigger(events.success,[fileConversionActions_objectSpread({},args,{fileName:files[0].name,files:files})],!0)}else EventsService.a.trigger(events.success,[fileConversionActions_objectSpread({},args,{fileName:files[0].name,files:files})],!0)}}}}}}]);